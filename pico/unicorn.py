import picounicorn
import time

picounicorn.init()

eye = [
    b"\xff\xf8\xdb\xe6\xd7\xcd\xc3\xb5\xa7\xa5\x85n\x9boTp8*V\x1b\x14Q \x11>\x18\x10oI4\xaa\x89Y\xf3\xd7\x9d\xff\xff\xd7\xfe\xfd\xef\xff\xfd\xeb\xff\xfc\xe9\x91N(5\x1c\x16$\x17\x15^\x1f\x1ap)\x19\x97aT\x8dVIM3/1\x1c\x1d<\x00\x00,\x00\x00B\x1d\x13\xb8\x8bV\xff\xfa\xd8\xfd\xfd\xfb\xff\xfe\xf9\x80=.\x10\x00\x00`4 \xdd\x8eF\xbe{,\xce\x9dP\xcb\xb5\x89\xc0\xd1\xe8\xa6\xad\xbf\xd4\xb6\xa6\x9c^BS\x0f\x07#\x00\x00\xb0\x8fc\xff\xff\xfe\xfd\xfd\xff\xbc\x85]$\x06\t\xc7\x821\xff\xc44\xf5\xb8/\xe6\xa9\x1c\xbf\xa7GV[p[UF\xfc\xdc{\xff\xcd^\xcav\x19b\x19\t$\x0e\t\xe5\xd8\xc3\xfe\xff\xff\xb6\x8dm/\r\x0e\xd9\x9b.\xff\xe1A\xfe\xd5<\xff\xdaA\xcc\xb56\x00\x00\x05pb\x1b\xfc\xe6-\xfb\xdf$\xfe\xc7!\xcbi\x13%\x00\x00\x81nZ\xff\xff\xff\xd4\xae~?\x16\x1a\xc6\x8f*\xff\xfeX\xfb\xf2T\xfe\xf4P\xf3\xd8M \x1f\x17\xbd\xb49\xff\xffS\xfb\xf6H\xff\xe2\'\xe8\x8c\x07fDCQC;\xfc\xf1\xe1\xfb\xe8\xc5_:2vB\x13\xff\xf1H\xfd\xfdX\xff\xfaV\xfe\xe4B\x90{$\xef\xe7A\xff\xffY\xfd\xfbS\xff\xf34\xccw\x0f(\x18\x1d\x1b\r\r\xe4\xd2\xc1",
    b'\xac~\\{[ByeO}qYUL3\x84\x8dp\xa3\xb6\x9e\x9c\xa3\x80\xa3\x9ai\xb1\xa5p\x9e\xa5\x85z\x8bypyqrpgQB6nYJu_I\x9e\x90v\xda\xcb\xab\x95\x8cn\x82\x88i\x9a\xb4\x9d\xb5\xbd\x91\xd0\xc0|\x8c~O\x97}G\xc4\xafo\xac\xc0\xa8\xbc\xdb\xdd\xe8\xfb\xfc\x82\x8e\x86\xbf\xbf\xbc\xbd\xac\x8d\xff\xfd\xe1\xfd\xf5\xd5|v[\x8c\xa3\x8f\xaa\xce\xbf\xd1\xcc\x87vrL\x00\x00\x02\x05\x05\x07\x95\x8fq\xe5\xf8\xe9\xd5\xf4\xf8\xee\xff\xff\x97\xab\xa8\xc1\xca\xc9\xf4\xdb\xb8\xff\xff\xeb\xf6\xec\xd1\x8c\x83g\xb1\xc2\xa8\xd1\xf1\xdf\xe4\xe8\xac{|^\x00\x00\x00\x0c\x07\x05\x90\x90y\xea\xfc\xf3\xdf\xfc\xfe\xf8\xfe\xfe\x9f\xb4\xb3\xb7\xc1\xbf\xea\xce\xa8\xff\xf7\xd9\xff\xfc\xe6\x92\x88q\x99\xa5\x90\xdf\xfd\xf7\xd2\xe8\xd1\xd7\xd8\xa5\xa2\xa6\x8a\x99\x9b\x83\xd1\xd8\xb7\xee\xfe\xfd\xe9\xfe\xfe\xf2\xff\xff\x97\xb1\xaf\xce\xd7\xd8\xc1\xa5\x8a\xea\xce\xb1\xff\xf6\xdf\xc8\xbe\xaals`\xd8\xec\xe1\xe4\xf9\xf7\xd3\xec\xe2\xff\xff\xfb\xf9\xff\xf5\xc1\xe2\xd6\xcf\xf1\xed\xcc\xf2\xf5\xc6\xe6\xe6\x8a\xa1\x9e\xf5\xf6\xf7\x93]F\x9fr\\\xc3\xa3\x8e\xd7\xc3\xad\x80xd\x8e\x96\x81\xd3\xee\xec\xbc\xe4\xeb\xeb\xf6\xf7\xf0\xfa\xfb\xbe\xe8\xee\xa3\xca\xc8\xb9\xd8\xcc\x86\x9f\x98\xc3\xcc\xce\xff\xff\xff'
]

# white corner 4x4
# eye = b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
# red corner 4x4
# eye = b'\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'

# From CPython Lib/colorsys.py
def hsv_to_rgb(h, s, v):
    if s == 0.0:
        return v, v, v
    i = int(h * 6.0)
    f = (h * 6.0) - i
    p = v * (1.0 - s)
    q = v * (1.0 - s * f)
    t = v * (1.0 - s * (1.0 - f))
    i = i % 6
    if i == 0:
        return v, t, p
    if i == 1:
        return q, v, p
    if i == 2:
        return p, v, t
    if i == 3:
        return p, q, v
    if i == 4:
        return t, p, v
    if i == 5:
        return v, p, q


w = picounicorn.get_width()
h = picounicorn.get_height()

# for xid in range(len(eye)*3):
id = 1
while True:
    id = (id + 1) % len(eye)
    elen = len(eye[id])
    # Display a rainbow across Pico Unicorn
    for x in range(w):
        for y in range(h):
            # r, g, b = [int(c * 255) for c in hsv_to_rgb(x / w, y / h, 1.0)]
            pos = (y*w+x)*3
            r = eye[id][(pos+0) % elen]
            g = eye[id][(pos+1) % elen]
            b = eye[id][(pos+2) % elen]
            picounicorn.set_pixel(x, y, r, g, b)

    print("Press Button A")

    while not picounicorn.is_pressed(picounicorn.BUTTON_A):  # Wait for Button A to be pressed
        pass
    while picounicorn.is_pressed(picounicorn.BUTTON_A):  # Wait for Button A to be de-pressed
        pass
    time.sleep(0.05)


# Clear the display
for x in range(w):
    for y in range(h):
        picounicorn.set_pixel(x, y, 0, 0, 0)

print("Button A pressed!")

